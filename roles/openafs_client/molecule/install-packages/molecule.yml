---
dependency:
  name: galaxy
driver:
  name: vagrant
  provider:
    name: libvirt
platforms:
  - name: m-client-03
    box: ${M_BOX:-generic/centos7}
    memory: 2048
    cpus: 1
    groups:
      - afs_clients
provisioner:
  name: ansible
  playbooks:
    converge: ../default/converge.yml
    verify: ../default/verify.yml
  inventory:
    group_vars:
      afs_clients:
        m_update_kernel: ${M_UPDATE_KERNEL:-no}
        m_enable_selinux: ${M_ENABLE_SELINUX:-yes}
        m_with_dkms: ${M_WITH_DKMS:-yes}
        m_test_rpms: ~/.cache/ansible-openafs/rpms/el7/x86_64
        afs_install_method: packages
        afs_rpm_version: 1.9.0
        afs_rpm_release: 1.el7
verifier:
  name: ansible
scenario:
  test_sequence:
    - cleanup
    - destroy
    - create
    - prepare
    - converge
    - verify
    - cleanup
    - destroy
